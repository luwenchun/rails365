<div class="text-center">
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
    <div class="container bootstrap snippet">
      <div class="lc-block col-md-4 col-md-offset-4 toggled" id="l-login" style="padding-top: 15px;">
        <h4 style="margin-bottom: 25px;">注册</h4>
        <%= devise_error_messages! %>
        <div class="form-group">
          <%= f.text_field :username, autofocus: true, class: "form-control", placeholder: "用户名" %>
        </div>
        <div class="form-group">
          <%= f.email_field :email, class: "form-control", placeholder: "邮箱" %>
        </div>
        <div class="form-group">
          <%= f.password_field :password, autocomplete: "off", class: "form-control", placeholder: "密码" %>
        </div>
        <div class="form-group">
          <%= f.password_field :password_confirmation, autocomplete: "off", class: "form-control", placeholder: "确认密码" %>
        </div>
        <div class="form-group">
          <%= rucaptcha_image_tag(alt: 'Captcha', id: "Captcha") %>
          <%= rucaptcha_input_tag(class: 'form-control', placeholder: "验证码") %>
        </div>
        <div class="clearfix"></div>
        <%= f.submit t('.sign_up', :default => "Sign up"), class: "btn btn-block btn-primary btn-float m-t-25" %>
        <div class="prompt-box text-center">
          <%= link_to "已有账号登录", new_session_path(resource_name), class: "clickable" %>
        </div>
        <hr>
        <%= link_to omniauth_authorize_path(:user, :github), class: "btn btn-block btn-primary btn-float m-t-25 mb20 btn-dark" do %>
          <i class="fa fa-github" aria-hidden="true"></i>
          Github 账号免注册一键登录
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<script>
$(document).ready(function() {
  $("#Captcha").on('click', function() {
    $(this).attr("src", "/rucaptcha?" + (new Date()).valueOf());
  })
})
</script>
