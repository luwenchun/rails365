#= require jquery
#= require jquery_ujs
#= require jquery-fileupload/basic
#= require jquery.caret
#= require form_storage
#- require bootstrap/dropdown
#- require bootstrap/collapse
#- require bootstrap/alert
#- require bootstrap/tab
#- require bootstrap/carousel
#= require jquery.checkall
#= require jquery.ba-throttle-debounce
#= require jquery.fluidbox.min
#= require rails-timeago
#= require locales/jquery.timeago.zh-CN.js
#= require bootstrap-markdown-bundle
#= require locale/bootstrap-markdown.zh
#= require social-share-button
#= require social-share-button/wechat
#= require devise
#= require infinite_scroll
#= require jquery.sticky
#= require back_to_top
#= require Chart.bundle
#= require cable

jQuery ->
  $(".sub-nav a").hover (->
    if !$(this).hasClass('current')
      $(this).addClass('current')
    ), ->
      if !$(this).hasClass('active')
        $(this).removeClass('current')

  $(".search_btn").on 'click', (event) ->
    event.preventDefault()
    $(".search-form").toggleClass('hidden')

  $(".sticker").sticky
    topSpacing: 70
    zIndex: 9

  $(".playlist-angle").on 'click', ->
    $(this).next().toggleClass('hidden');

  $('.carousel').carousel()
  autosize($('textarea'));

jQuery ->
  flash = [
    "info"
    "success"
    "danger"
    "warning"
  ]
  for key of flash
    select = ".alert-autocloseable-" + flash[key]
    $(select).delay(5000).fadeOut()  if $(select).length > 0
